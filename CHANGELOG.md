# 更新日志

## [3.0.4] - 2025-12-30

### 新增功能
- **自定义延时发包**：支持无延时、固定延时、随机延时三种模式，可配置延时时间和随机区间
- **自定义追加参数**：支持为每个请求自动追加指定的key/value参数，兼容各种请求格式
- **智能参数排除**：追加的参数可选择是否参与payload测试，提供更灵活的控制
- **参数测试模式**：用户可自定义追加参数的测试行为，既可避免重复也可发现更多漏洞

### 优化改进
- **分离payload保存加载功能**：添加独立的"保存payload"按钮，功能职责更清晰
- **增强JSON参数追加**：改进JSON格式检测逻辑，确保参数正确添加到JSON请求体

### 修复
- **修复JSON追加参数检测问题**：改进Content-Type检测逻辑，使用双重检测机制（枚举值+HTTP头）确保JSON参数正确添加到请求体
- **修复payload保存逻辑混乱**：分离保存和加载功能，添加独立的"保存payload"按钮，避免用户操作困惑
- **优化追加参数格式识别**：增强对application/json格式的识别准确性

## [3.0.3] - 2025-12-28

### 优化改进
- **重构JSON参数处理**：使用Burp Suite内置JsonUtils和JsonNode API替代复杂的自定义解析算法
- **提升JSON处理准确性**：利用官方API的稳定性和可靠性，减少解析错误
- **简化代码结构**：移除冗余的JSON解析方法，提高代码可维护性
- **增强嵌套结构支持**：更好地处理复杂的JSON参数场景，提升开源用户体验
- **优化工具监听逻辑**：默认只监听Proxy和Repeater流量，不自动处理Scanner和Intruder流量

### 新增功能
- **自定义延时发包**：支持无延时、固定延时、随机延时三种模式，可配置延时时间和随机区间
- **自定义追加参数**：支持为每个请求自动追加指定的key/value参数，兼容各种请求格式
- **智能参数排除**：追加的参数可选择是否参与payload测试，提供更灵活的控制
- **参数测试模式**：用户可自定义追加参数的测试行为，既可避免重复也可发现更多漏洞

### 修复
- **修复Windows系统UI显示问题**：优化payload组管理按钮布局，确保所有按钮完整显示
- **修复白名单按钮显示问题**：改进GridBagLayout约束，解决按钮被隐藏的问题
- **修复白名单输入框隐藏问题**：重新设计控制面板布局，确保输入框正确显示
- **修复布局结构错误**：恢复正确的三层分割面板结构，确保所有UI组件正常显示
- **修复右侧面板丢失问题**：纠正分割面板配置，恢复控制面板和标签页的正确布局
- **修复请求响应查看器丢失**：恢复左侧下方的数据包详情显示区域
- **修复Scanner流量自动处理问题**：移除Scanner和Intruder流量的自动处理，只处理用户明确启用的工具
- **修复payload保存逻辑混乱**：分离保存和加载功能，添加独立的"保存payload"按钮
- **修复JSON追加参数失效问题**：改用JsonNode API处理JSON参数追加，确保参数正确添加到JSON body
- **优化Windows DPI适配**：添加DPI感知和字体渲染优化，提升高分辨率显示效果
- **改进UI组件布局**：使用更稳定的布局管理器，确保跨平台兼容性

## [3.0.2] - 2025-12-28

### 新增
- 优化配置文件路径，配置文件现在存储在用户主目录的`dousql/`目录下
- **增强JSON处理能力**：支持复杂嵌套JSON结构，包括多层对象、数组和混合数据类型
- 扩展默认payload字典，新增多种SQL注入检测payload（共17种）
- 扩展默认报错信息字典，支持多种数据库和框架的错误信息识别（共33种）
- 完善使用文档，新增结果标记说明和使用技巧指南

### 修复
- 修复配置文件路径检测问题，避免在Burp临时目录下创建无效路径
- 改进路径验证逻辑，确保配置目录始终有效且可访问
- **修复状态显示问题**：解决测试异常时状态一直显示"start"的问题

### 改进
- 简化配置文件管理，统一使用`~/dousql/`目录，提高用户体验
- **大幅提升JSON处理能力**：重写JSON解析逻辑，支持任意深度的嵌套结构和复杂数据类型
- 增强payload覆盖范围，支持更多注入场景
- 扩展静态文件过滤列表，包含更多图片格式和静态资源类型
- 完善文档说明，提供详细的配置目录说明和JSON处理指南

## [3.0.1] - 2025-12-26

### 修复
- 修复工具来源判断逻辑错误导致的无限循环测试问题
- 修复响应时间检测优先级问题，确保超时请求正确显示"time > N"标记
- 优化监听条件判断，避免未启用监听时错误处理toolFlag=0的请求

### 改进
- 提升插件稳定性和可靠性
- 优化检测结果显示逻辑

## [3.0.0] - 2025-12-25

### 新增
- 基于Montoya API重构，提升稳定性和兼容性
- 新增payload分组管理功能，支持多种测试场景
- 优化用户界面布局，改进左右分割面板设计
- 新增参数过滤系统，支持白名单/黑名单模式
- 新增黑名单URL过滤功能，支持通配符匹配
- 新增自定义报错信息检测功能
- 新增响应时间阈值和长度差异阈值配置
- 优化时间盲注检测逻辑，支持全payload类型时间检测
- 新增配置文件统一管理，所有配置持久化保存
- 新增HTTP方法过滤，仅检测GET/POST请求
- 优化错误检测优先级，报错信息优先于其他变化标记
- 新增状态栏时间超时标记，完善检测结果展示

### 修复
- 修复跨平台兼容性问题，确保Windows/macOS下界面正常显示
- 修复多线程并发问题，提升插件稳定性

### 改进
- 全面重构代码架构，提升维护性
- 优化用户界面设计，提升用户体验
- 完善配置管理系统，提高易用性